# fast_transfer
# 极速跨盘迁移工具 v1.0.0

一款专为游戏玩家和需要移动大量零散文件的用户设计的智能、高效的跨磁盘文件迁移工具。

## 项目背景

在不同硬盘之间移动大型文件夹（如游戏目录、开发项目）时，Windows自带的复制/移动功能常常因为处理海量小文件而变得异常缓慢。本项目旨在通过智能打包和并行处理，将跨盘迁移速度提升数倍甚至数十倍。

## 核心功能

- **智能迁移策略**：自动区分大文件与小文件。对海量小文件进行“仅打包，不压缩”处理，合并为单个大文件进行传输；对大文件则直接进行移动，充分利用两种方式的优势。
- **高性能并行处理**：智能检测CPU核心数（支持大小核），并自动配置最优的并行进程数，最大化利用系统性能。
- **优雅的图形用户界面 (GUI)**：基于Tkinter和现代化的UI风格，提供直观、易用的操作界面。
- **任务恢复**：在迁移意外中断（如断电、程序崩溃）后，支持从断点处恢复任务，无需从头开始。
- **性能优化向导**：内置向导，指导用户通过临时关闭杀毒软件（如Windows Defender）等方式，将迁移性能提升到极致。
- **可配置高级选项**：允许用户自定义并行数、包大小、超时时间等参数，满足专业用户的需求。
- **同盘快速移动**：智能检测到源和目标在同一磁盘时，自动切换为极速的元数据移动模式，瞬间完成操作。

## 工作原理

1.  **扫描与规划**：程序首先扫描源文件夹，统计所有文件的大小和数量。
2.  **动态阈值**：根据文件的平均大小，动态计算出一个“大文件”阈值。
3.  **任务分配**：
    -   小于该阈值的文件被归类为“小文件”。
    -   大于等于该阈值的文件被归类为“大文件”。
4.  **执行迁移**：
    -   **小文件**：被分组并使用7-Zip以“仅存储”（不压缩，速度最快）模式打包成临时的`.7z`文件。这些包随后被移动到目标盘并解压。这个过程是高度并行的。
    -   **大文件**：被直接、逐个地从源盘移动到目标盘。
5.  **清理**：所有文件成功迁移到目标盘后，程序会自动删除源盘的原始文件和临时打包文件，并清理空目录。

## 如何使用

1.  运行 `极速跨盘迁移工具.exe`。
2.  在“源文件夹”处，选择您想要移动的文件夹。
3.  在“目标文件夹”处，选择您希望将文件夹移动到的位置。
4.  点击“开始迁移”按钮。
5.  （可选）点击“设置”按钮，可以调整性能模式或更多高级参数。

## 性能提示

为达到最佳性能，强烈建议在迁移前，根据程序内“性能优化向导”的提示，临时关闭Windows Defender的实时保护和其他杀毒软件。这可以带来数倍的性能提升。

## 配置文件说明 (`settings.json`)

本工具会在首次关闭时自动在程序目录下创建一个 `settings.json` 文件。该文件用于保存您的所有设置，以便下次启动时自动加载，无需重新配置。

您可以直接用记事本等文本编辑器打开并修改此文件。

| 参数名                     | 类型    | 说明                                                                                             |
| -------------------------- | ------- | ------------------------------------------------------------------------------------------------ |
| `source_path`              | 字符串  | 上次使用的源文件夹路径。                                                                         |
| `target_path`              | 字符串  | 上次使用的目标文件夹路径。                                                                       |
| `performance_mode`         | 字符串  | 性能模式。`"performance"` 为性能模式，`"normal"` 为普通模式。                                    |
| `show_performance_guide`   | 布尔值  | 是否在下次启动时自动显示性能优化向导。`true` 为显示，`false` 为不显示。                           |
| `copy_only`                | 布尔值  | 是否启用“仅复制”模式。`true` 为仅复制不删除源文件，`false` 为移动（迁移后删除源文件）。          |
| `gui_debug_mode`           | 布尔值  | 是否启用调试模式。`true` 会在界面日志区域显示更详细的日志信息。                                  |
| `max_workers`              | 字符串  | **[高级]** 并行进程数。程序会智能检测默认值，但您可手动修改。                                    |
| `chunk_size`               | 字符串  | **[高级]** 单个压缩包的大小上限（单位：MB）。                                                    |
| `file_limit`               | 字符串  | **[高级]** 单个压缩包内的文件数量上限。                                                          |
| `timeout`                  | 字符串  | **[高级]** 单个打包/解压任务的超时时间（单位：秒）。                                             |
| `enable_intra_disk_check`  | 布尔值  | **[高级]** 是否启用同盘检测。`true` 会在同盘操作时自动切换为快速移动模式。                         |

## Bug反馈

- **作者**: @fangguan233
- **版本**: 1.0.0 (2024.07.19)

如果在使用中发现任何Bug，欢迎通过以下链接提交Issue：
[https://github.com/fangguan233/fast_transfer/issues](https://github.com/fangguan233/fast_transfer/issues)
